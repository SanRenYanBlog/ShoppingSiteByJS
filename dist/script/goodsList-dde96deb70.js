"use strict";var loginStatus=document.querySelectorAll(".topRight ul li")[0],registerStatus=document.querySelectorAll(".topRight ul li")[1],hrefAll=location.href.split("/");hrefAll.pop();var href=hrefAll.join("/");function loginInit(){var t=judgeCookie();null!==t&&(loginStatus.innerText="你好，"+t,registerStatus.innerHTML="注销"),"注销"===registerStatus.innerHTML&&registerStatus.addEventListener("click",exitHandler)}function exitHandler(t){confirm("你确定要注销吗？")&&(registerStatus.innerHTML="注册",delAllCookie(),location.reload())}loginInit();var jsonData,ul=document.querySelector(".goodsList .center ul");ajax({url:"../json/goods.json",type:"get",data:null,dataType:"json",success:function(t){jsonData=JSON.parse(t),addUlData()}});var typeAll=document.querySelectorAll(".optionsType ul li")[0],typeA=document.querySelectorAll(".optionsType ul li")[1],typeB=document.querySelectorAll(".optionsType ul li")[2],typeC=document.querySelectorAll(".optionsType ul li")[3],typeD=document.querySelectorAll(".optionsType ul li")[4],targetLover=document.querySelectorAll(".targetType ul li")[0],targetElder=document.querySelectorAll(".targetType ul li")[1],targetFriend=document.querySelectorAll(".targetType ul li")[2],optSyn=document.querySelectorAll(".optionsStatus ul li")[0],optSales=document.querySelectorAll(".optionsStatus ul li")[1],optPrice=document.querySelectorAll(".optionsStatus ul li")[2],optDate=document.querySelectorAll(".optionsStatus ul li")[3],typeTarget=typeAll,optStatus=optSyn,showGoodsArr=[],options=document.querySelector(".options .center");function clickHandler(t){"optionsType"===t.target.parentNode.parentNode.className||"optionsType targetType"===t.target.parentNode.parentNode.className?(ul.innerHTML="",typeTarget.style.color="#222223",t.target.style.color="#FE7A24",typeTarget=t.target,t.target===typeAll&&addUlData(),t.target===typeA&&addUlData("A"),t.target===typeB&&addUlData("B"),t.target===typeC&&addUlData("C"),t.target===typeD&&addUlData("D"),t.target===targetLover&&addUlData(null,"lover"),t.target===targetElder&&addUlData(null,"elder"),t.target===targetFriend&&addUlData(null,"friend")):"optionsStatus"===t.target.parentNode.parentNode.className&&(ul.innerHTML="",optStatus.style.color="#222223",t.target.style.color="#FE7A24",optStatus=t.target,t.target===optSyn&&(showGoodsArr.sort(function(){return Math.random()-.5}),addUlByArr()),t.target===optSales&&(showGoodsArr.sort(function(t,e){return parseInt(t.sales)-parseInt(e.sales)}),addUlByArr()),t.target===optPrice&&(showGoodsArr.sort(function(t,e){return parseInt(t.price)-parseInt(e.price)}),addUlByArr()),t.target===optDate&&(showGoodsArr.sort(function(t,e){return t.date-e.date}),addUlByArr()))}function addUlData(o,n){if(showGoodsArr=[],o){for(var t in jsonData)!function(t){var e;jsonData[t].type===o&&((e=document.createElement("li")).onclick=function(){open("".concat(href,"/goodsDetails.html?id=").concat(t))},e.innerHTML+='<div class="goodsImg">\n                                            <img src="'.concat(jsonData[t].mainImg,'">\n                                        </div>\n                                        <h2>').concat(jsonData[t].h2,"</h2>\n                                        <h3>").concat(jsonData[t].h3,"</h3>\n                                        <h4>").concat(jsonData[t].h4,"</h4>\n                                        <h5>￥").concat(jsonData[t].price,"</h5>"),ul.appendChild(e),showGoodsArr.push(jsonData[t]))}(t)}else if(n){for(var e in jsonData)!function(t){var e;jsonData[t].target===n&&((e=document.createElement("li")).onclick=function(){open("".concat(href,"/goodsDetails.html?id=").concat(t))},e.innerHTML+='<div class="goodsImg">\n                                            <img src="'.concat(jsonData[t].mainImg,'">\n                                        </div>\n                                        <h2>').concat(jsonData[t].h2,"</h2>\n                                        <h3>").concat(jsonData[t].h3,"</h3>\n                                        <h4>").concat(jsonData[t].h4,"</h4>\n                                        <h5>￥").concat(jsonData[t].price,"</h5>"),ul.appendChild(e),showGoodsArr.push(jsonData[t]))}(e)}else{for(var a in jsonData)!function(t){var e=document.createElement("li");e.onclick=function(){open("".concat(href,"/goodsDetails.html?id=").concat(t))},e.innerHTML+='<div class="goodsImg">\n                                            <img src="'.concat(jsonData[t].mainImg,'">\n                                        </div>\n                                        <h2>').concat(jsonData[t].h2,"</h2>\n                                        <h3>").concat(jsonData[t].h3,"</h3>\n                                        <h4>").concat(jsonData[t].h4,"</h4>\n                                        <h5>￥").concat(jsonData[t].price,"</h5>"),ul.appendChild(e),showGoodsArr.push(jsonData[t])}(a)}}function addUlByArr(){showGoodsArr.forEach(function(t){var e=document.createElement("li");e.onclick=function(){open("".concat(href,"/goodsDetails.html?id=").concat(t.id))},e.innerHTML+='<div class="goodsImg">\n                                    <img src="'.concat(t.mainImg,'">\n                                </div>\n                                <h2>').concat(t.h2,"</h2>\n                                <h3>").concat(t.h3,"</h3>\n                                <h4>").concat(t.h4,"</h4>\n                                <h5>￥").concat(t.price,"</h5>"),ul.appendChild(e)})}options.addEventListener("click",clickHandler);